name: 0用来测试Actions代码
on:
  repository_dispatch:
  workflow_dispatch:

jobs:
  build:
    runs-on: macos-latest
    if: github.event.repository.owner.id == github.event.sender.id
    steps:
      - uses: actions/checkout@v2
        with:
          persist-credentials: false 
          fetch-depth: 0 

      - name: 检查空间占用情况
        run: |
          echo "警告⚠"
          echo "若服务器空间不足，务必及时取消，重新运行！"
          echo "-----------------------------硬盘信息---------------------------------------------"
          echo -e  "硬盘数量：$(ls /dev/sd* | grep -v [1-9] | wc -l) \n"
          echo "硬盘详情："
          df -h
          #cd /System/Volumes/Data
          #sudo du -d 1 -h
          #sudo rm -rf /System/Volumes/Data/Library/Developer/Xcode/iOS DeviceSupport
          #sudo du -d 1 -h
          sudo ls -al /System/Volumes/Data/Library/Developer/Xcode/iOS\ DeviceSupport
          echo "硬盘详情："
          df -h
       

      # - name: Delete workflow runs
      #   uses: Mattraks/delete-workflow-runs@v1.2.3
      #   with:
      #     token: ${{ github.token }}
      #     repository: ${{ github.repository }}
      #     retain_days: 0
      #     keep_minimum_runs: 0
